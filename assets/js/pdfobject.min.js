/*
    PDFObject v2.0.201604172
    https://github.com/pipwerks/PDFObject
    Copyright (c) 2008-2016 Philip Hutchison
    MIT-style license: http://pipwerks.mit-license.org/
    UMD module pattern from https://github.com/umdjs/umd/blob/master/templates/returnExports.js
*/

(function(root, factory) {
  if (typeof define === "function" && define.amd) {
    define([], factory);
  } else if (typeof module === "object" && module.exports) {
    module.exports = factory();
  } else {
    root.PDFObject = factory();
  }
})(this, function() {
  "use strict";
  if (typeof window === "undefined" || typeof navigator === "undefined") {
    return false;
  }

  var pdfobjectversion = "2.0.201604172";
  var supportsPDFs;
  var createAXO;
  var isIE;
  var supportsPdfMimeType = typeof navigator.mimeTypes["application/pdf"] !== "undefined";
  var supportsPdfActiveX;
  var buildFragmentString;
  var log;
  var embedError;
  var embed;
  var getTargetElement;
  var generatePDFJSiframe;
  var isIOS = (function() {
    return /iphone|ipad|ipod/i.test(navigator.userAgent.toLowerCase());
  })();

  var generateEmbedElement;

  createAXO = function(type) {
    var ax;
    try {
      ax = new ActiveXObject(type);
    } catch (e) {
      ax = null;
    }
    return ax;
  };

  isIE = function() {
    return !!(window.ActiveXObject || "ActiveXObject" in window);
  };

  supportsPdfActiveX = function() {
    return !!(createAXO("AcroPDF.PDF") || createAXO("PDF.PdfCtrl"));
  };

  supportsPDFs = supportsPdfMimeType || (isIE() && supportsPdfActiveX());

  buildFragmentString = function(pdfParams) {
    var string = "",
      prop;
    if (pdfParams) {
      for (prop in pdfParams) {
        if (pdfParams.hasOwnProperty(prop)) {
          string += encodeURIComponent(prop) + "=" + encodeURIComponent(pdfParams[prop]) + "&";
        }
      }
      if (string) {
        string = "#" + string;
        string = string.slice(0, string.length - 1);
      }
    }
    return string;
  };

  log = function(msg) {
    if (typeof console !== "undefined" && console.log) {
      console.log("[PDFObject] " + msg);
    }
  };

  embedError = function(msg) {
    log(msg);
    return false;
  };

  getTargetElement = function(targetSelector) {
    var targetNode = document.body;
    if (typeof targetSelector === "string") {
      targetNode = document.querySelector(targetSelector);
    } else if (typeof jQuery !== "undefined" && targetSelector instanceof jQuery && targetSelector.length) {
      targetNode = targetSelector.get(0);
    } else if (typeof targetSelector.nodeType !== "undefined" && targetSelector.nodeType === 1) {
      targetNode = targetSelector;
    }
    return targetNode;
  };

  generatePDFJSiframe = function(targetNode, url, pdfOpenFragment, PDFJS_URL, id) {
    var fullURL = PDFJS_URL + "?file=" + encodeURIComponent(url) + pdfOpenFragment;
    var scrollfix = isIOS ? "-webkit-overflow-scrolling: touch; overflow-y: scroll; " : "overflow: hidden; ";
    var iframe = "<div style='" + scrollfix + "position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
